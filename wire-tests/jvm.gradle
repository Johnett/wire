apply plugin: 'java-library'

kotlin.targets.matching { it.platformType.name == 'jvm' }.all { target ->
  target.project.sourceCompatibility = JavaVersion.VERSION_1_8
  target.project.targetCompatibility = JavaVersion.VERSION_1_8

  tasks['jar'].configure {
    manifest {
      attributes('Automatic-Module-Name': 'wire-tests')
    }
  }
  
  target.project.sourceSets {
    test.java.srcDirs += 'src/test/proto-java'
    test.kotlin.srcDirs += 'src/test/proto-kotlin'
  }
}
